# 멤버시

아이돌 그룹 팬 채팅방에서 멤버시 보조용으로 사용할 수 있는 봇



## License

이 코드를 사용하려면 **봇 정보를 표시하는 기능을 수정하거나 제거하지 않아야만** 합니다.

위 사항만 지키면 누구나 어떤 용도로도 자유롭게 수정/배포/사용할 수 있습니다.

직·간접적인 어떠한 형태의 모든 보증을 부인합니다.



## Getting Started

봇을 설정하는 방법입니다.



### Prerequisites

카카오톡 봇입니다. 카카오톡이 설치되어 있어야 합니다.

듀얼 메신저는 동작하지만 `Parallel Space` 등으로는 사용할 수 없습니다.

봇 앱을 아무거나 설치해 주세요. (파일 경로가 [이 앱](https://play.google.com/store/apps/details?id=be.zvz.newskbot)을 기준으로 만들어졌습니다.)

[Wear OS by Google](https://play.google.com/store/apps/details?id=com.google.android.wearable.app)을 설치해 주세요. (설치가 되어 있어야 봇이 작동합니다.)

봇 앱에 알림 읽기 권한을 허용해 주세요. (알림을 읽어서 답장하는 원리입니다.)



### Setting

`response.js`를 복사하고 `members.txt`와 `rooms.txt` 파일을 적절히 작성해 주세요.

`members.txt`와 `rooms.txt` 파일은 `(내부 저장소 경로)/kbot` 폴더에 있어야 합니다.

오픈채팅방의 경우 따로 방 이름을 바꾸지 않았는데 방장이 이름을 바꾸면

방 이름이 같이 바뀌어 _봇이 정상적으로 동작하지 않을 수_ 있으니

**반드시 방 이름을 따로 바꿔두는 것이 좋습니다.**

※ 그룹이나 멤버 이름, 방 이름이나 접두사에 슬래시(`/`)를 사용할 수 없습니다.



#### members.txt

첫번째 줄에 그룹 이름을 쓰고, 그 다음 줄부터 멤버 한 명에 한 줄씩

`멤버 이름 / 태어난 달 / 태어난 일` 형태로 적어주세요.

본명이나 별명이 따로 있다면 그 뒤에 슬래시(`/`)로 구분해서 적어주세요.

그룹이 여러개라면 다음 그룹을 적기 전에 **한 줄이 비어 있어야 합니다.**

```
그룹이름1
멤버이름1/월/일/별명1
멤버이름2/월/일/별명1/별명2
멤버이름3/월/일

그룹이름2
멤버이름1/월/일/별명1
멤버이름2/월/일/별명1/별명2/별명3
멤버이름3/월/일
멤버이름4/월/일/별명1/별명2
```

대충 이런 식으로 적으시면 됩니다.

※ 멤버시 명령어를 사용하면 이름이나 별명이 `멤버`인 멤버는 무시될 수 있습니다.



#### rooms.txt

한 줄에 방 하나씩 `방 이름 / 접두사 / 그룹 이름` 형태로 적으시면 됩니다.

혹시 잡덕방이라 그룹이 여러개라면 `방 / 접두사 / 그룹명 / 그룹명 / 그룹명` ...

```
방이름1/V/그룹이름1
방이름2/B/그룹이름2
잡덕방/X/그룹이름1/그룹이름2
```

접두사는 봇 명령어의 맨 앞 글자입니다.

접두사를 `V`로 하면 `V멤버시`라는 명령어에 반응합니다.

`!멤버시`라는 명령어에 반응하도록 하고 싶다면 접두사를 `!`로 하면 됩니다.

※ 슬래시(`/`)는 접두사로 너무 많이 쓰여서 의도적으로 **사용할 수 없도록** 만들었습니다.

※ **접두사를 없애는 것은 권장하지 않습니다.** 봇이 의도치 않게 호출되지 않게 해 주세요.



### 로그

`rooms.txt`에서 `members.txt`에 없는 그룹을 사용하려고 하거나

같은 그룹이 여러 번 있거나, 멤버 정보가 잘못되면 로그가 남습니다.

파일을 수정하고 스크립트 리로드를 했을 경우 **반드시 로그를 확인**해주세요.

혹시 모를 오타로 인한 오류를 미연에 방지할 수 있습니다.



`메모장` 등의 일부 텍스트 에디터는 파일의 처음에 BOM문자가 저장됩니다.

그럴 경우, 첫번째 그룹과 첫번째 방이 이상하게 인식될 가능성이 있습니다.

해당 문제가 발생한다면 **맨 앞의 두 줄을 비우고 저장**하시면 그 문제를 피할 수 있습니다.



봇 시간은 **그 기기의 시간**을 따라갑니다. 시간이 안 맞으면 **봇 시간도** 안 맞습니다.

시간을 동기화하거나 채팅방마다 다른 시간대를 적용하는 기능은 만들지 않았습니다.



## Deployment

봇 사용법



### 명령어

접두사가 `A`라고 가정하겠습니다.

##### 멤버시 관련

- `A멤버시` - 가장 가까운 다음 멤버시와 남은 시간을 알려줍니다.
- `A멤버시 목록` - 모든 멤버시를 시간 순서대로 **모두** 보여줍니다.
- `A`(멤버 이름, 별명)`시` - 해당 멤버시까지 남은 시간을 알려줍니다.

##### 기타

- `A정보` - 봇의 정보를 표시합니다. **이 기능은 수정하거나 삭제하면 안 됩니다.**



## Contributing

추후 업데이트 계획 없습니다.

하지만 간단한 오탈자 수정이라도 Pull Request는 환영합니다.

```C
if(cond)
{
	something();
}
```

괄호 닫고 중괄호 열기 전에, _띄어쓰기 아니고 줄바꿈입니다!_

인덴트는 무조건 탭 문자로 해 주세요.



## Authors

- **맹주영** - _Initial work_ - [mjy9088](https://gitlab.com/mjy9088)



## Acknowledgments

- 대충 만들었지만, 잘 사용해 주셔서 감사합니다 (_ _)...